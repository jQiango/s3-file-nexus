# Docker环境配置
server:
  port: 8081

spring:
  application:
    name: s3-file-nexus

  servlet:
    multipart:
      max-file-size: 100MB
      max-request-size: 100MB

# 存储配置
storage:
  # 默认使用动态配置
  default-backend: dynamic

  upload:
    max-file-size: 104857600
    temp-dir: /tmp/storage

  preview:
    enabled: true
    url-expiration: 3600
    enable-image-compression: true
    image-max-width: 1920
    image-max-height: 1080
    image-quality: 0.85

  cache:
    enabled: true
    expiration: 300
    max-entries: 1000
    cache-dir: /tmp/storage-cache

  security:
    enable-file-type-check: true
    enable-file-size-limit: true
    enable-filename-sanitization: true
    allowed-file-types:
      - jpg
      - jpeg
      - png
      - gif
      - bmp
      - webp
      - svg
      - pdf
      - doc
      - docx
      - xls
      - xlsx
      - ppt
      - pptx
      - txt
      - md
      - json
      - xml
      - yaml
      - yml
      - zip
      - rar
      - 7z
      - tar
      - gz
      - mp3
      - wav
      - ogg
      - flac
      - mp4
      - avi
      - mov
      - wmv
      - flv
      - webm
    forbidden-file-types:
      - exe
      - bat
      - cmd
      - com
      - pif
      - scr
      - jar
      - js
      - vbs
      - sh

  # 后端配置（通过前端页面动态配置）
  backends: {}

# 日志配置
logging:
  level:
    root: INFO
    com.all.in.one.agent.storage: INFO
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"

# Actuator
management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      show-details: always
