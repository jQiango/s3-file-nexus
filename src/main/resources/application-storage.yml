server:
  port: 8081
  servlet:
    context-path: /

spring:
  application:
    name: one-agent-4j-storage

  # 静态资源配置
  web:
    resources:
      static-locations: classpath:/static/
      add-mappings: true

  # 文件上传配置
  servlet:
    multipart:
      max-file-size: 100MB
      max-request-size: 100MB
      enabled: true

  # JSON序列化配置
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: GMT+8

# 存储模块配置
storage:
  # 默认使用的存储后端
  default-backend: lianjia-s3

  # 存储后端配置
  backends:
    # 链家 S3 存储
    lianjia-s3:
      name: zqt-data-daily
      type: S3
      endpoint: https://storage.lianjia.com
      access-key-id: 55DIWBJB0X4U249D8DD0
      access-key-secret: 52NLJIBoVrGtC25xpIeREclO25pXIdjGEYtM83vT
      region: ap-beijing
      default-bucket: zqt-data-daily
      enabled: true

  upload:
    max-file-size: 104857600  # 100MB
    max-file-count: 10
    temp-dir: /tmp/storage
    enable-multipart: true
    chunk-size: 5242880  # 5MB

  preview:
    enabled: true
    url-expiration: 3600  # 1小时
    max-preview-size: 52428800  # 50MB
    max-text-lines: 1000
    thumbnail-size: 200

  security:
    enable-file-type-check: true
    enable-file-size-limit: true
    enable-filename-sanitization: true
    enable-virus-scan: false
    allowed-file-types:
      - jpg
      - jpeg
      - png
      - gif
      - bmp
      - webp
      - svg
      - pdf
      - doc
      - docx
      - xls
      - xlsx
      - ppt
      - pptx
      - txt
      - md
      - json
      - xml
      - yaml
      - yml
      - zip
      - rar
      - 7z
      - tar
      - gz
      - mp3
      - wav
      - ogg
      - flac
      - mp4
      - avi
      - mov
      - wmv
      - flv
      - webm
    forbidden-file-types:
      - exe
      - bat
      - cmd
      - com
      - pif
      - scr
      - jar
      - js
      - vbs
      - sh

  cache:
    enabled: true
    expiration: 300  # 5分钟
    max-entries: 1000
    cache-dir: /tmp/storage-cache

# 日志配置
logging:
  level:
    com.all.in.one.agent.storage: DEBUG
    org.springframework.web: INFO
    software.amazon.awssdk: WARN
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n" 